<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kopi Minimalist | The Art of Coffee</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #F9F5F0;
            --text-color: #2C2420;
            --accent-color: #C07F48;
            --secondary-text: #6D645F;
            --card-bg: #FFFFFF;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3, h4 { font-family: 'Playfair Display', serif; }

        /* --- THREE.JS BACKGROUND --- */
        #canvas-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            z-index: -1; opacity: 0.5; pointer-events: none;
        }

        /* --- NAVIGATION --- */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 2rem 5%; position: fixed; width: 100%; top: 0; z-index: 100;
            background: rgba(249, 245, 240, 0.8);
            backdrop-filter: blur(10px);
            transition: 0.3s;
        }
        .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: 2px; }
        .nav-links { display: flex; gap: 3rem; list-style: none; }
        .nav-links li a {
            text-decoration: none; color: var(--text-color); font-size: 0.9rem;
            text-transform: uppercase; letter-spacing: 1px; position: relative;
        }
        .nav-links li a::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0%;
            height: 1px; background: var(--text-color); transition: 0.3s;
        }
        .nav-links li a:hover::after { width: 100%; }

        /* --- HERO SECTION --- */
        header {
            height: 100vh; display: flex; flex-direction: column; justify-content: center;
            padding: 0 5%; position: relative;
        }
        .hero-subtitle {
            text-transform: uppercase; letter-spacing: 4px; font-size: 0.8rem;
            color: var(--accent-color); margin-bottom: 1rem; opacity: 0;
        }
        .hero-title {
            font-size: 5.5rem; line-height: 1; margin-bottom: 2rem;
            background: linear-gradient(45deg, var(--text-color), #4a3b32);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero-desc {
            font-size: 1.1rem; color: var(--secondary-text); max-width: 500px;
            margin-bottom: 3rem; line-height: 1.6; opacity: 0;
        }
        .btn {
            display: inline-block; padding: 1rem 2.5rem; border: 1px solid var(--text-color);
            color: var(--text-color); text-decoration: none; text-transform: uppercase;
            letter-spacing: 1px; font-size: 0.8rem; transition: 0.3s; cursor: pointer;
            background: transparent;
        }
        .btn:hover { background-color: var(--text-color); color: var(--bg-color); }

        /* --- MARQUEE --- */
        .marquee {
            background: var(--text-color); color: var(--bg-color);
            padding: 1.5rem 0; overflow: hidden; white-space: nowrap;
            position: relative; z-index: 5;
        }
        .marquee-content {
            display: inline-block; font-family: 'Playfair Display', serif;
            font-size: 2rem; font-style: italic; animation: scroll 20s linear infinite;
        }
        @keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }

        /* --- FEATURED MENU --- */
        .featured { padding: 8rem 5%; }
        .section-header { margin-bottom: 4rem; text-align: center; }
        .section-header h2 { font-size: 3rem; margin-bottom: 1rem; }
        .grid-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
        }
        .card {
            background: var(--card-bg); border-radius: 8px; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); transition: transform 0.3s;
            cursor: pointer;
        }
        .card:hover { transform: translateY(-10px); }
        .card-img-wrap { overflow: hidden; height: 300px; }
        .card-img {
            width: 100%; height: 100%; object-fit: cover;
            transition: transform 0.5s; filter: sepia(0.2);
        }
        .card:hover .card-img { transform: scale(1.1); filter: sepia(0); }
        .card-content { padding: 2rem; }
        .price { font-weight: 600; color: var(--accent-color); display: block; margin-top: 1rem;}

        /* --- HORIZONTAL SCROLL (The Process) --- */
        .scroll-section-outer { overflow: hidden; }
        .scroll-section-inner {
            height: 100vh; width: 400vw; /* 4 slides wide */
            display: flex; flex-direction: row; position: relative;
        }
        .scroll-step {
            width: 100vw; height: 100vh; display: flex; align-items: center;
            justify-content: center; padding: 0 10%; gap: 5%;
        }
        .step-num {
            font-size: 10rem; opacity: 0.1; position: absolute; top: 10%; left: 5%;
            font-family: 'Playfair Display'; font-weight: 700;
        }
        .step-content { max-width: 500px; z-index: 2; }
        .step-img {
            width: 500px; height: 600px; object-fit: cover; border-radius: 4px;
            box-shadow: 20px 20px 0px var(--accent-color);
        }
        
        /* Alternating layout for scroll steps */
        .scroll-step:nth-child(even) { flex-direction: row-reverse; }

        /* --- STATS --- */
        .stats {
            padding: 6rem 5%; background: var(--text-color); color: var(--bg-color);
            display: flex; justify-content: space-around; flex-wrap: wrap; text-align: center;
        }
        .stat-item h3 { font-size: 4rem; color: var(--accent-color); }
        .stat-item p { text-transform: uppercase; letter-spacing: 2px; font-size: 0.8rem; }

        /* --- PARALLAX VIDEO/IMAGE --- */
        .parallax-section {
            height: 80vh; position: relative; overflow: hidden; display: flex;
            align-items: center; justify-content: center; text-align: center; color: white;
        }
        .parallax-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 120%;
            object-fit: cover; z-index: -1; filter: brightness(0.6);
        }
        .parallax-content h2 { font-size: 4rem; margin-bottom: 2rem; }

        /* --- TESTIMONIALS --- */
        .testimonials { padding: 8rem 5%; text-align: center; }
        .quote-icon { font-size: 3rem; color: var(--accent-color); margin-bottom: 2rem; }
        .review-text {
            font-size: 2rem; font-family: 'Playfair Display'; max-width: 900px;
            margin: 0 auto 2rem; line-height: 1.4;
        }
        .reviewer { font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase; font-weight: 600; }

        /* --- FOOTER --- */
        footer {
            padding: 5rem 5% 2rem; background: #221a16; color: #ada5a0;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 3rem;
        }
        footer h4 { color: #fff; margin-bottom: 1.5rem; letter-spacing: 1px; }
        footer ul { list-style: none; }
        footer ul li { margin-bottom: 0.8rem; cursor: pointer; transition: 0.3s; }
        footer ul li:hover { color: var(--accent-color); }
        .newsletter input {
            width: 100%; padding: 1rem; border: none; background: #332a25;
            color: white; margin-bottom: 1rem;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .hero-title { font-size: 3.5rem; }
            .nav-links { display: none; }
            .scroll-section-inner { width: 100%; height: auto; flex-direction: column; }
            .scroll-step { width: 100%; height: auto; padding: 4rem 5%; flex-direction: column !important; }
            .step-img { width: 100%; height: 300px; margin-bottom: 2rem; box-shadow: 10px 10px 0px var(--accent-color); }
            .parallax-content h2 { font-size: 2.5rem; }
        }
    </style>
</head>
<body>

    <!-- Three.js Canvas -->
    <div id="canvas-container"></div>

    <nav>
        <div class="logo">KOPI.</div>
        <ul class="nav-links">
            <li><a href="#menu">Menu</a></li>
            <li><a href="#process">Process</a></li>
            <li><a href="#story">Story</a></li>
            <li><a href="#visit">Visit</a></li>
        </ul>
    </nav>

    <!-- 1. HERO -->
    <header>
        <div class="hero-content">
            <p class="hero-subtitle">Est. 2024 • Kyoto Inspired</p>
            <h1 class="hero-title">Silence in <br> every <span style="font-style: italic; color: var(--accent-color);">Sip.</span></h1>
            <p class="hero-desc">We strip away the noise to focus on what matters. Ethically sourced single-origin beans, roasted with precision, brewed for the soul.</p>
            <button class="btn">Explore Menu</button>
        </div>
    </header>

    <!-- 2. MARQUEE -->
    <div class="marquee">
        <div class="marquee-content">
            SINGLE ORIGIN • ORGANIC • FAIR TRADE • 100% ARABICA • COLD BREW • HAND POURED • SINGLE ORIGIN • ORGANIC • FAIR TRADE • 100% ARABICA • COLD BREW • HAND POURED • 
        </div>
    </div>

    <!-- 3. CURATED MENU -->
    <section class="featured" id="menu">
        <div class="section-header">
            <p style="color: var(--accent-color); letter-spacing: 2px; text-transform: uppercase;">Our Selection</p>
            <h2>Curated Habits</h2>
        </div>
        <div class="grid-container">
            <!-- Item 1 -->
            <div class="card">
                <div class="card-img-wrap">
                    <img src="https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=1000&auto=format&fit=crop" class="card-img" alt="Latte">
                </div>
                <div class="card-content">
                    <h3>Velvet Latte</h3>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">House blend espresso, silky steamed oat milk, dusting of nutmeg.</p>
                    <span class="price">$5.50</span>
                </div>
            </div>
            <!-- Item 2 -->
            <div class="card">
                <div class="card-img-wrap">
                    <img src="https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=1000&auto=format&fit=crop" class="card-img" alt="Espresso">
                </div>
                <div class="card-content">
                    <h3>Kyoto Cold Brew</h3>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Slow-drip method over 12 hours. Smooth, chocolatey, low acidity.</p>
                    <span class="price">$6.00</span>
                </div>
            </div>
            <!-- Item 3 -->
            <div class="card">
                <div class="card-img-wrap">
                    <img src="https://images.unsplash.com/photo-1600093463592-8e36ae95ef56?q=80&w=1000&auto=format&fit=crop" class="card-img" alt="Beans">
                </div>
                <div class="card-content">
                    <h3>Ethiopian Yirgacheffe</h3>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Floral notes, bergamot, and a tea-like finish. 250g Bag.</p>
                    <span class="price">$18.00</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. HORIZONTAL SCROLL STORY (The Hook) -->
    <!-- On Desktop, this section scrolls sideways. On mobile, it stacks. -->
    <div class="scroll-section-outer" id="process">
        <div class="scroll-section-inner">
            
            <div class="scroll-step">
                <div class="step-content">
                    <span class="hero-subtitle">Step 01</span>
                    <h2>The Source</h2>
                    <p style="line-height: 1.8; margin-top: 1rem;">We partner directly with small-lot farmers in Colombia and Ethiopia. By bypassing the middlemen, we ensure fair wages and beans that are picked at the peak of their ripeness.</p>
                </div>
                <img src="https://images.unsplash.com/photo-1524350876685-274059332603?q=80&w=1000&auto=format&fit=crop" class="step-img" alt="Coffee Farm">
                <span class="step-num">01</span>
            </div>

            <div class="scroll-step">
                <div class="step-content">
                    <span class="hero-subtitle">Step 02</span>
                    <h2>The Roast</h2>
                    <p style="line-height: 1.8; margin-top: 1rem;">Roasted in small batches in our downtown facility. We use a light-medium roast profile to preserve the natural fruit and nut characteristics of the bean.</p>
                </div>
                <img src="https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?q=80&w=1000&auto=format&fit=crop" class="step-img" alt="Roasting">
                <span class="step-num">02</span>
            </div>

            <div class="scroll-step">
                <div class="step-content">
                    <span class="hero-subtitle">Step 03</span>
                    <h2>The Brew</h2>
                    <p style="line-height: 1.8; margin-top: 1rem;">Precision is key. We weigh every gram and time every second. Whether it's V60 pour-over or high-pressure espresso, consistency is our religion.</p>
                </div>
                <img src="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=1000&auto=format&fit=crop" class="step-img" alt="Brewing">
                <span class="step-num">03</span>
            </div>

            <div class="scroll-step">
                <div class="step-content">
                    <span class="hero-subtitle">Step 04</span>
                    <h2>The Moment</h2>
                    <p style="line-height: 1.8; margin-top: 1rem;">The final step belongs to you. Take a seat in our minimalist sanctuary, disconnect from the digital world, and enjoy the moment.</p>
                </div>
                <img src="https://images.unsplash.com/photo-1507133750069-bef72f3710f9?q=80&w=1000&auto=format&fit=crop" class="step-img" alt="Enjoying">
                <span class="step-num">04</span>
            </div>
            
        </div>
    </div>

    <!-- 5. STATS -->
    <section class="stats">
        <div class="stat-item">
            <h3 class="counter" data-target="12">0</h3>
            <p>Varieties</p>
        </div>
        <div class="stat-item">
            <h3 class="counter" data-target="85">0</h3>
            <p>Cupping Score</p>
        </div>
        <div class="stat-item">
            <h3 class="counter" data-target="100">0</h3>
            <p>% Organic</p>
        </div>
        <div class="stat-item">
            <h3 class="counter" data-target="4">0</h3>
            <p>Locations</p>
        </div>
    </section>

    <!-- 6. PARALLAX BANNER -->
    <section class="parallax-section">
        <img src="https://images.unsplash.com/photo-1447933601403-0c60e017bc32?q=80&w=1000&auto=format&fit=crop" class="parallax-bg" alt="Coffee Texture">
        <div class="parallax-content">
            <h2>Taste the Difference.</h2>
            <button class="btn" style="border-color: white; color: white;">Order Online</button>
        </div>
    </section>

    <!-- 7. TESTIMONIALS -->
    <section class="testimonials">
        <div class="quote-icon">“</div>
        <p class="review-text">"The most peaceful coffee shop I've ever visited. The Velvet Latte is life-changing, and the atmosphere allows for pure focus."</p>
        <p class="reviewer">— Sarah Jenkins, Food Critic</p>
    </section>

    <!-- 8. FOOTER -->
    <footer>
        <div class="footer-col">
            <div class="logo" style="color: white; margin-bottom: 1rem;">KOPI.</div>
            <p>Minimalist Coffee Roasters.<br>Est. 2024</p>
        </div>
        <div class="footer-col">
            <h4>Explore</h4>
            <ul>
                <li>Shop Beans</li>
                <li>Wholesale</li>
                <li>Subscriptions</li>
                <li>Careers</li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Locations</h4>
            <ul>
                <li>New York</li>
                <li>Kyoto</li>
                <li>London</li>
                <li>Berlin</li>
            </ul>
        </div>
        <div class="footer-col newsletter">
            <h4>Stay Updated</h4>
            <input type="email" placeholder="Email Address">
            <button class="btn" style="border-color: #666; color: #ccc; width: 100%;">Subscribe</button>
        </div>
    </footer>

    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // --- 1. HERO ANIMATION ---
        const tl = gsap.timeline({ defaults: { ease: "power4.out" } });
        tl.to(".hero-subtitle", { opacity: 1, duration: 1, y: 0, delay: 0.5 })
          .from(".hero-title", { y: 50, opacity: 0, duration: 1.2 }, "-=0.5")
          .to(".hero-desc", { opacity: 1, y: 0, duration: 1 }, "-=0.8")
          .from(".btn", { opacity: 0, y: 20, duration: 0.8 }, "-=0.8");

        // --- 2. CARD HOVER STAGGER ---
        gsap.from(".card", {
            scrollTrigger: { trigger: ".featured", start: "top 80%" },
            y: 100, opacity: 0, duration: 0.8, stagger: 0.2
        });

        // --- 3. HORIZONTAL SCROLL ANIMATION ---
        // Only run on desktop/tablet where width is large enough
        if (window.innerWidth > 768) {
            let sections = gsap.utils.toArray(".scroll-step");
            gsap.to(sections, {
                xPercent: -100 * (sections.length - 1),
                ease: "none",
                scrollTrigger: {
                    trigger: ".scroll-section-outer",
                    pin: true,
                    scrub: 1,
                    snap: 1 / (sections.length - 1),
                    end: () => "+=" + document.querySelector(".scroll-section-outer").offsetWidth
                }
            });
        }

        // --- 4. COUNTER ANIMATION ---
        const stats = document.querySelectorAll('.counter');
        stats.forEach(stat => {
            let target = +stat.getAttribute('data-target');
            gsap.to(stat, {
                innerText: target,
                duration: 2,
                snap: { innerText: 1 },
                scrollTrigger: { trigger: ".stats", start: "top 85%" }
            });
        });

        // --- 5. PARALLAX EFFECT ---
        gsap.to(".parallax-bg", {
            yPercent: 20,
            ease: "none",
            scrollTrigger: {
                trigger: ".parallax-section",
                start: "top bottom", 
                end: "bottom top",
                scrub: true
            }
        });

        // --- 6. THREE.JS PARTICLES (Interactive Background) ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const geometry = new THREE.BufferGeometry();
        const count = 400;
        const posArray = new Float32Array(count * 3);
        for(let i = 0; i < count * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 12; // Spread
        }
        geometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const material = new THREE.PointsMaterial({
            size: 0.02, color: 0xC07F48, transparent: true, opacity: 0.8
        });
        const mesh = new THREE.Points(geometry, material);
        scene.add(mesh);
        camera.position.z = 3;

        // Interaction
        let mouseX = 0; let mouseY = 0;
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX / window.innerWidth - 0.5;
            mouseY = e.clientY / window.innerHeight - 0.5;
        });

        function animate() {
            requestAnimationFrame(animate);
            mesh.rotation.y += 0.002;
            mesh.rotation.x += 0.001;
            // Parallax mouse follow
            mesh.rotation.y += mouseX * 0.05;
            mesh.rotation.x += mouseY * 0.05;
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            // Refresh scrolltrigger for horizontal scroll
            ScrollTrigger.refresh();
        });
    </script>
</body>
</html>